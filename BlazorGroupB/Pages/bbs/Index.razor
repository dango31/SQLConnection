@page "/"
@using BlazorGroupB.Data
@using BlazorGroupB.Data.DAO;
@using BlazorGroupB.Models
@using System.Text
@using Microsoft.EntityFrameworkCore
@using System.Configuration
@using Npgsql
@using System.Data
@using System.Diagnostics
@inject BlazorGroupBDbContext _contextThread
@inject NavigationManager NavigationManager

<div class="banner">
    <div class="channel-name text-center" style="font-size: 50px;">
        @ChannelName <!-- チャンネル名を表示 -->
    </div>
</div>

<div class="buttons">
    <button @onclick="DoFortuneTelling" class="buttons special" style="font-size: 16px; width: 100px; padding: 15px 30px;">占い</button>
    <button @onclick="ReloadPage" style="font-size: 16px; width: 170px; padding: 15px 30px;">再読み込み</button>
</div>

<div class="search">
    <button @onclick="NewThread" style="font-size: 16px; width: 250px; padding: 15px 30px;">新規スレッド投稿</button>
    <!-- 検索用の入力欄 -->
    <input type="text" @bind="searchTerm" placeholder="検索">
    <!-- 検索ボタン -->
    <button @onclick="SelectSearch" class="button">検索</button>
</div>

<div class="thread">
    <!-- スレッドの表示を行うコンポーネントを追加 -->
    <ThreadDisplay />
</div>

@code {
    // チャンネル名を保持するプロパティ
    private string ChannelName { get; set; } = "エール第一チャンネル";

    private string searchTerm;

    // 新しいスレッドを投稿するメソッド
    private void NewThread()
    {
        // 新しいスレッド作成ページに遷移
        NavigationManager.NavigateTo("/Thread/Create");
    }

    // 検索を実行するメソッド
    private void SelectSearch()
    {
        // ここに検索を実行する処理を追加
    }

    // 占いボタンが押されたときの処理
    private void DoFortuneTelling()
    {
        // 占いページに遷移
        NavigationManager.NavigateTo("/UranaiPage");
    }

    // ページを再読み込みするメソッド
    private void ReloadPage()
    {
        NavigationManager.NavigateTo(NavigationManager.Uri, forceLoad: true);
    }
}
